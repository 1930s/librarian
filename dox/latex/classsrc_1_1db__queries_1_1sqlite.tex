\hypertarget{classsrc_1_1db__queries_1_1sqlite}{
\section{src::db\_\-queries::sqlite Class Reference}
\label{classsrc_1_1db__queries_1_1sqlite}\index{src::db\_\-queries::sqlite@{src::db\_\-queries::sqlite}}
}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classsrc_1_1db__queries_1_1sqlite_ab98b135268b3844c18b4384a34f1ee3b}{
def {\bfseries \_\-\_\-init\_\-\_\-}}
\label{classsrc_1_1db__queries_1_1sqlite_ab98b135268b3844c18b4384a34f1ee3b}

\item 
\hypertarget{classsrc_1_1db__queries_1_1sqlite_a5d1b187c0f266098029426fefee03281}{
def {\bfseries \_\-\_\-del\_\-\_\-}}
\label{classsrc_1_1db__queries_1_1sqlite_a5d1b187c0f266098029426fefee03281}

\item 
def \hyperlink{classsrc_1_1db__queries_1_1sqlite_a744842c56e77f063e896780a20c80ecb}{create\_\-db}
\item 
def \hyperlink{classsrc_1_1db__queries_1_1sqlite_afef7eab73809474cab39063009664dbc}{get\_\-all\_\-books}
\item 
\hypertarget{classsrc_1_1db__queries_1_1sqlite_a9549259324efdd907d20ac9d1ed1063d}{
def {\bfseries get\_\-book\_\-count\_\-by\_\-isbn}}
\label{classsrc_1_1db__queries_1_1sqlite_a9549259324efdd907d20ac9d1ed1063d}

\item 
\hypertarget{classsrc_1_1db__queries_1_1sqlite_a7d3a3fb7effb6afed58ea90d456aa889}{
def {\bfseries get\_\-qrcode\_\-count}}
\label{classsrc_1_1db__queries_1_1sqlite_a7d3a3fb7effb6afed58ea90d456aa889}

\item 
def \hyperlink{classsrc_1_1db__queries_1_1sqlite_aad32d22d0cb673c961711c0396d5a26c}{get\_\-borrowed\_\-books}
\item 
\hypertarget{classsrc_1_1db__queries_1_1sqlite_a2d37825bd63dc890c91dd8020d84e0bc}{
def {\bfseries get\_\-borrowed\_\-book\_\-by\_\-id}}
\label{classsrc_1_1db__queries_1_1sqlite_a2d37825bd63dc890c91dd8020d84e0bc}

\item 
\hypertarget{classsrc_1_1db__queries_1_1sqlite_a756f1dd4cba71ee36f075d52f98f982f}{
def {\bfseries get\_\-book\_\-borrower\_\-by\_\-book\_\-id}}
\label{classsrc_1_1db__queries_1_1sqlite_a756f1dd4cba71ee36f075d52f98f982f}

\item 
\hypertarget{classsrc_1_1db__queries_1_1sqlite_ae41fd3648326c1b44b2f0d0da983b3cd}{
def {\bfseries get\_\-borrowers\_\-borrowed\_\-books}}
\label{classsrc_1_1db__queries_1_1sqlite_ae41fd3648326c1b44b2f0d0da983b3cd}

\item 
\hypertarget{classsrc_1_1db__queries_1_1sqlite_aeff969689ee9a788041e61de54251d59}{
def {\bfseries get\_\-borrower\_\-by\_\-id}}
\label{classsrc_1_1db__queries_1_1sqlite_aeff969689ee9a788041e61de54251d59}

\item 
def \hyperlink{classsrc_1_1db__queries_1_1sqlite_a63ab71d64fda1235b3556b3956b31cdc}{get\_\-borrows}
\item 
def \hyperlink{classsrc_1_1db__queries_1_1sqlite_a926cc2ce60c5e7c2df548c9123732561}{get\_\-all\_\-borrowers}
\item 
def \hyperlink{classsrc_1_1db__queries_1_1sqlite_aef554970f084d1bc7d9a70eff784e9c0}{search\_\-books}
\item 
def \hyperlink{classsrc_1_1db__queries_1_1sqlite_a3ff8c6fd0beb11afd7065d23952febe1}{insert\_\-book\_\-object}
\item 
def \hyperlink{classsrc_1_1db__queries_1_1sqlite_a217ec37ce32643fa3b0664dbcefc7cd2}{insert\_\-book\_\-complete}
\item 
def \hyperlink{classsrc_1_1db__queries_1_1sqlite_af14376c653f816e1066d2f4a4359cb9d}{insert\_\-unique\_\-author}
\item 
def \hyperlink{classsrc_1_1db__queries_1_1sqlite_a6abb493897bfea05cc3ad22070c0926a}{get\_\-by\_\-id}
\item 
\hypertarget{classsrc_1_1db__queries_1_1sqlite_a19d5f4150b8277c950498747d8e0cab1}{
def {\bfseries get\_\-one\_\-borrower}}
\label{classsrc_1_1db__queries_1_1sqlite_a19d5f4150b8277c950498747d8e0cab1}

\item 
\hypertarget{classsrc_1_1db__queries_1_1sqlite_a23c2e089c440d0a2d373d8bc3f50ffaa}{
def {\bfseries update\_\-book}}
\label{classsrc_1_1db__queries_1_1sqlite_a23c2e089c440d0a2d373d8bc3f50ffaa}

\item 
def \hyperlink{classsrc_1_1db__queries_1_1sqlite_a4c430faeb749412d9b7bb11a0e634fd6}{add\_\-borrow}
\item 
\hypertarget{classsrc_1_1db__queries_1_1sqlite_af40ba3a88385ea7c895be035be090acd}{
def {\bfseries update\_\-borrows}}
\label{classsrc_1_1db__queries_1_1sqlite_af40ba3a88385ea7c895be035be090acd}

\item 
\hypertarget{classsrc_1_1db__queries_1_1sqlite_abd29479bee0f35564e3f5737f5c3b564}{
def {\bfseries add\_\-new\_\-borrower}}
\label{classsrc_1_1db__queries_1_1sqlite_abd29479bee0f35564e3f5737f5c3b564}

\item 
\hypertarget{classsrc_1_1db__queries_1_1sqlite_adf0fd3aeef982754e149c636e6aec18f}{
def {\bfseries update\_\-borrower}}
\label{classsrc_1_1db__queries_1_1sqlite_adf0fd3aeef982754e149c636e6aec18f}

\item 
def \hyperlink{classsrc_1_1db__queries_1_1sqlite_a4253955a4622883271aff0fbf9c28468}{remove\_\-book}
\item 
def \hyperlink{classsrc_1_1db__queries_1_1sqlite_ab0a41a32c9c35d54b874ad179e5112d3}{add\_\-location}
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classsrc_1_1db__queries_1_1sqlite_a0f6073448700a10c82addd69c471168a}{
{\bfseries con}}
\label{classsrc_1_1db__queries_1_1sqlite_a0f6073448700a10c82addd69c471168a}

\item 
\hypertarget{classsrc_1_1db__queries_1_1sqlite_a5f38afee85b01b1c3281375be2ceaeaa}{
{\bfseries cur}}
\label{classsrc_1_1db__queries_1_1sqlite_a5f38afee85b01b1c3281375be2ceaeaa}

\end{DoxyCompactItemize}


\subsection{Detailed Description}
\begin{DoxyVerb}
Database queries for sqlite.

\end{DoxyVerb}
 

\subsection{Member Function Documentation}
\hypertarget{classsrc_1_1db__queries_1_1sqlite_a4c430faeb749412d9b7bb11a0e634fd6}{
\index{src::db\_\-queries::sqlite@{src::db\_\-queries::sqlite}!add\_\-borrow@{add\_\-borrow}}
\index{add\_\-borrow@{add\_\-borrow}!src::db_queries::sqlite@{src::db\_\-queries::sqlite}}
\subsubsection[{add\_\-borrow}]{\setlength{\rightskip}{0pt plus 5cm}def src::db\_\-queries::sqlite::add\_\-borrow (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{id, }
\item[{}]{bid}
\end{DoxyParamCaption}
)}}
\label{classsrc_1_1db__queries_1_1sqlite_a4c430faeb749412d9b7bb11a0e634fd6}
\begin{DoxyVerb}Insert a borrower into the borrows table.
\end{DoxyVerb}
 \hypertarget{classsrc_1_1db__queries_1_1sqlite_ab0a41a32c9c35d54b874ad179e5112d3}{
\index{src::db\_\-queries::sqlite@{src::db\_\-queries::sqlite}!add\_\-location@{add\_\-location}}
\index{add\_\-location@{add\_\-location}!src::db_queries::sqlite@{src::db\_\-queries::sqlite}}
\subsubsection[{add\_\-location}]{\setlength{\rightskip}{0pt plus 5cm}def src::db\_\-queries::sqlite::add\_\-location (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{room, }
\item[{}]{shelf}
\end{DoxyParamCaption}
)}}
\label{classsrc_1_1db__queries_1_1sqlite_ab0a41a32c9c35d54b874ad179e5112d3}
\begin{DoxyVerb}
Add a new location to the database. 
\end{DoxyVerb}
 \hypertarget{classsrc_1_1db__queries_1_1sqlite_a744842c56e77f063e896780a20c80ecb}{
\index{src::db\_\-queries::sqlite@{src::db\_\-queries::sqlite}!create\_\-db@{create\_\-db}}
\index{create\_\-db@{create\_\-db}!src::db_queries::sqlite@{src::db\_\-queries::sqlite}}
\subsubsection[{create\_\-db}]{\setlength{\rightskip}{0pt plus 5cm}def src::db\_\-queries::sqlite::create\_\-db (
\begin{DoxyParamCaption}
\item[{}]{self}
\end{DoxyParamCaption}
)}}
\label{classsrc_1_1db__queries_1_1sqlite_a744842c56e77f063e896780a20c80ecb}
\begin{DoxyVerb}Create the DB with schema.
The query is the schema file.  We shouldn't get this far with a
missing config file.  The user is prompted to edit one.   The lite_db
name shouls be left alone.

schema created with:
sqlite books.db, derived from the MySQL DB
.output books.db.schema
.schema
.quit

\end{DoxyVerb}
 \hypertarget{classsrc_1_1db__queries_1_1sqlite_afef7eab73809474cab39063009664dbc}{
\index{src::db\_\-queries::sqlite@{src::db\_\-queries::sqlite}!get\_\-all\_\-books@{get\_\-all\_\-books}}
\index{get\_\-all\_\-books@{get\_\-all\_\-books}!src::db_queries::sqlite@{src::db\_\-queries::sqlite}}
\subsubsection[{get\_\-all\_\-books}]{\setlength{\rightskip}{0pt plus 5cm}def src::db\_\-queries::sqlite::get\_\-all\_\-books (
\begin{DoxyParamCaption}
\item[{}]{self}
\end{DoxyParamCaption}
)}}
\label{classsrc_1_1db__queries_1_1sqlite_afef7eab73809474cab39063009664dbc}
\begin{DoxyVerb}
An example of how to call the code from mysql from here.  This is
to avoid duplication code where the query code is identical.  For 
trivial selects this will the case, in other cases the sqlite3 code 
will differ slightly.
return mysql().get_all_books()
  
\end{DoxyVerb}
 \hypertarget{classsrc_1_1db__queries_1_1sqlite_a926cc2ce60c5e7c2df548c9123732561}{
\index{src::db\_\-queries::sqlite@{src::db\_\-queries::sqlite}!get\_\-all\_\-borrowers@{get\_\-all\_\-borrowers}}
\index{get\_\-all\_\-borrowers@{get\_\-all\_\-borrowers}!src::db_queries::sqlite@{src::db\_\-queries::sqlite}}
\subsubsection[{get\_\-all\_\-borrowers}]{\setlength{\rightskip}{0pt plus 5cm}def src::db\_\-queries::sqlite::get\_\-all\_\-borrowers (
\begin{DoxyParamCaption}
\item[{}]{self}
\end{DoxyParamCaption}
)}}
\label{classsrc_1_1db__queries_1_1sqlite_a926cc2ce60c5e7c2df548c9123732561}
\begin{DoxyVerb}
Get all the borrowers in the database.

\end{DoxyVerb}
 \hypertarget{classsrc_1_1db__queries_1_1sqlite_aad32d22d0cb673c961711c0396d5a26c}{
\index{src::db\_\-queries::sqlite@{src::db\_\-queries::sqlite}!get\_\-borrowed\_\-books@{get\_\-borrowed\_\-books}}
\index{get\_\-borrowed\_\-books@{get\_\-borrowed\_\-books}!src::db_queries::sqlite@{src::db\_\-queries::sqlite}}
\subsubsection[{get\_\-borrowed\_\-books}]{\setlength{\rightskip}{0pt plus 5cm}def src::db\_\-queries::sqlite::get\_\-borrowed\_\-books (
\begin{DoxyParamCaption}
\item[{}]{self}
\end{DoxyParamCaption}
)}}
\label{classsrc_1_1db__queries_1_1sqlite_aad32d22d0cb673c961711c0396d5a26c}
\begin{DoxyVerb}
Get a list of books that have been borrowed.

\end{DoxyVerb}
 \hypertarget{classsrc_1_1db__queries_1_1sqlite_a63ab71d64fda1235b3556b3956b31cdc}{
\index{src::db\_\-queries::sqlite@{src::db\_\-queries::sqlite}!get\_\-borrows@{get\_\-borrows}}
\index{get\_\-borrows@{get\_\-borrows}!src::db_queries::sqlite@{src::db\_\-queries::sqlite}}
\subsubsection[{get\_\-borrows}]{\setlength{\rightskip}{0pt plus 5cm}def src::db\_\-queries::sqlite::get\_\-borrows (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{bid, }
\item[{}]{copies}
\end{DoxyParamCaption}
)}}
\label{classsrc_1_1db__queries_1_1sqlite_a63ab71d64fda1235b3556b3956b31cdc}
\begin{DoxyVerb}Differing syntax for sqlite\end{DoxyVerb}
 \hypertarget{classsrc_1_1db__queries_1_1sqlite_a6abb493897bfea05cc3ad22070c0926a}{
\index{src::db\_\-queries::sqlite@{src::db\_\-queries::sqlite}!get\_\-by\_\-id@{get\_\-by\_\-id}}
\index{get\_\-by\_\-id@{get\_\-by\_\-id}!src::db_queries::sqlite@{src::db\_\-queries::sqlite}}
\subsubsection[{get\_\-by\_\-id}]{\setlength{\rightskip}{0pt plus 5cm}def src::db\_\-queries::sqlite::get\_\-by\_\-id (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{book\_\-id}
\end{DoxyParamCaption}
)}}
\label{classsrc_1_1db__queries_1_1sqlite_a6abb493897bfea05cc3ad22070c0926a}
\begin{DoxyVerb}
Search for book on its ID.  NB. This is NOT its ISBN
NB The normal parameter substitution doesn't seem to work here  getting:
Incorrect number of bindings supplied. The current statement uses 1, and there are N supplied.
errors if the number has more than one digit.  N = number of digits. 
\end{DoxyVerb}
 \hypertarget{classsrc_1_1db__queries_1_1sqlite_a217ec37ce32643fa3b0664dbcefc7cd2}{
\index{src::db\_\-queries::sqlite@{src::db\_\-queries::sqlite}!insert\_\-book\_\-complete@{insert\_\-book\_\-complete}}
\index{insert\_\-book\_\-complete@{insert\_\-book\_\-complete}!src::db_queries::sqlite@{src::db\_\-queries::sqlite}}
\subsubsection[{insert\_\-book\_\-complete}]{\setlength{\rightskip}{0pt plus 5cm}def src::db\_\-queries::sqlite::insert\_\-book\_\-complete (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{title, }
\item[{}]{authors, }
\item[{}]{isbn, }
\item[{}]{abstract, }
\item[{}]{year, }
\item[{}]{publisher, }
\item[{}]{city, }
\item[{}]{mtype, }
\item[{}]{owner, }
\item[{}]{add\_\-date}
\end{DoxyParamCaption}
)}}
\label{classsrc_1_1db__queries_1_1sqlite_a217ec37ce32643fa3b0664dbcefc7cd2}
\begin{DoxyVerb}
Insert a books' complete details in to the DB.

\end{DoxyVerb}
 \hypertarget{classsrc_1_1db__queries_1_1sqlite_a3ff8c6fd0beb11afd7065d23952febe1}{
\index{src::db\_\-queries::sqlite@{src::db\_\-queries::sqlite}!insert\_\-book\_\-object@{insert\_\-book\_\-object}}
\index{insert\_\-book\_\-object@{insert\_\-book\_\-object}!src::db_queries::sqlite@{src::db\_\-queries::sqlite}}
\subsubsection[{insert\_\-book\_\-object}]{\setlength{\rightskip}{0pt plus 5cm}def src::db\_\-queries::sqlite::insert\_\-book\_\-object (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{book}
\end{DoxyParamCaption}
)}}
\label{classsrc_1_1db__queries_1_1sqlite_a3ff8c6fd0beb11afd7065d23952febe1}
\begin{DoxyVerb}Insert a book's details directly from a book object
@param book.  A book object.
@return Result of insert
\end{DoxyVerb}
 \hypertarget{classsrc_1_1db__queries_1_1sqlite_af14376c653f816e1066d2f4a4359cb9d}{
\index{src::db\_\-queries::sqlite@{src::db\_\-queries::sqlite}!insert\_\-unique\_\-author@{insert\_\-unique\_\-author}}
\index{insert\_\-unique\_\-author@{insert\_\-unique\_\-author}!src::db_queries::sqlite@{src::db\_\-queries::sqlite}}
\subsubsection[{insert\_\-unique\_\-author}]{\setlength{\rightskip}{0pt plus 5cm}def src::db\_\-queries::sqlite::insert\_\-unique\_\-author (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{authors}
\end{DoxyParamCaption}
)}}
\label{classsrc_1_1db__queries_1_1sqlite_af14376c653f816e1066d2f4a4359cb9d}
\begin{DoxyVerb}
Insert author(s) ensuring uniqueness.

\end{DoxyVerb}
 \hypertarget{classsrc_1_1db__queries_1_1sqlite_a4253955a4622883271aff0fbf9c28468}{
\index{src::db\_\-queries::sqlite@{src::db\_\-queries::sqlite}!remove\_\-book@{remove\_\-book}}
\index{remove\_\-book@{remove\_\-book}!src::db_queries::sqlite@{src::db\_\-queries::sqlite}}
\subsubsection[{remove\_\-book}]{\setlength{\rightskip}{0pt plus 5cm}def src::db\_\-queries::sqlite::remove\_\-book (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{bid}
\end{DoxyParamCaption}
)}}
\label{classsrc_1_1db__queries_1_1sqlite_a4253955a4622883271aff0fbf9c28468}
\begin{DoxyVerb}remove a book/copy from the db.  This just decrements the copy 
counter until copies = 0 then we remove the entry completely.
\end{DoxyVerb}
 \hypertarget{classsrc_1_1db__queries_1_1sqlite_aef554970f084d1bc7d9a70eff784e9c0}{
\index{src::db\_\-queries::sqlite@{src::db\_\-queries::sqlite}!search\_\-books@{search\_\-books}}
\index{search\_\-books@{search\_\-books}!src::db_queries::sqlite@{src::db\_\-queries::sqlite}}
\subsubsection[{search\_\-books}]{\setlength{\rightskip}{0pt plus 5cm}def src::db\_\-queries::sqlite::search\_\-books (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{search\_\-string}
\end{DoxyParamCaption}
)}}
\label{classsrc_1_1db__queries_1_1sqlite_aef554970f084d1bc7d9a70eff784e9c0}
\begin{DoxyVerb}
Get books based on author and title search.

\end{DoxyVerb}
 

The documentation for this class was generated from the following file:\begin{DoxyCompactItemize}
\item 
db\_\-queries.py\end{DoxyCompactItemize}
